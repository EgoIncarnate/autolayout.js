!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.AutoLayout=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,d){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){a.equalSpacerIndex=a.equalSpacerIndex||1;var c="_~"+a.lineIndex+":"+a.equalSpacerIndex+"~";switch(a.equalSpacerIndex>1&&a.constraints.push({view1:"_~"+a.lineIndex+":1~",attr1:a.horizontal?o.WIDTH:o.HEIGHT,relation:a.relation.relation||p.EQU,view2:c,attr2:a.horizontal?o.WIDTH:o.HEIGHT,priority:a.relation.priority}),a.equalSpacerIndex++,a.relation.multiplier&&1!==a.relation.multiplier?(a.constraints.push({view1:c,attr1:a.horizontal?o.WIDTH:o.HEIGHT,relation:a.relation.relation||p.EQU,view2:null,attr2:a.horizontal?o.WIDTH:o.HEIGHT,priority:a.relation.priority,multiplier:a.relation.multiplier}),a.relation.multiplier=void 0):a.relation.constant&&(a.constraints.push({view1:c,attr1:a.horizontal?o.WIDTH:o.HEIGHT,relation:p.EQU,view2:null,attr2:o.CONST,priority:a.relation.priority,constant:a.relation.constant}),a.relation.constant=void 0),a.orientation){case"horizontal":a.attr1=a.view1!==b?o.RIGHT:o.LEFT,a.attr2=o.LEFT;break;case"vertical":a.attr1=a.view1!==b?o.BOTTOM:o.TOP,a.attr2=o.TOP;break;case"zIndex":a.attr1=o.ZINDEX,a.attr2=o.ZINDEX,a.relation.constant=a.view1!==b?"default":0}a.constraints.push({view1:a.view1,attr1:a.attr1,relation:a.relation.relation,view2:c,attr2:a.attr2,priority:a.relation.priority}),a.view1=c}function g(a,b,c){c&&b.push({view:c});for(var d=0;d<b.length;d++)if(a.item=b[d],!Array.isArray(a.item)&&a.item.hasOwnProperty("view")){if(a.view1=a.view2,a.view2=a.item.view,void 0!==a.view1&&void 0!==a.view2&&a.relation){switch(a.relation.equalSpacing&&f(a,c),a.orientation){case"horizontal":a.attr1=a.view1!==c?o.RIGHT:o.LEFT,a.attr2=a.view2!==c?o.LEFT:o.RIGHT;break;case"vertical":a.attr1=a.view1!==c?o.BOTTOM:o.TOP,a.attr2=a.view2!==c?o.TOP:o.BOTTOM;break;case"zIndex":a.attr1=o.ZINDEX,a.attr2=o.ZINDEX,a.relation.constant=a.view1!==c?"default":0}a.constraints.push({view1:a.view1,attr1:a.attr1,relation:a.relation.relation,view2:a.view2,attr2:a.attr2,multiplier:a.relation.multiplier,constant:"default"!==a.relation.constant&&a.relation.constant?-a.relation.constant:a.relation.constant,priority:a.relation.priority})}if(a.relation=void 0,a.item.constraints)for(var e=0;e<a.item.constraints.length;e++)a.attr1=a.horizontal?o.WIDTH:o.HEIGHT,a.attr2=a.item.constraints[e].view||a.item.constraints[e].multiplier?a.item.constraints[e].attribute||a.attr1:a.item.constraints[e].variable?o.VARIABLE:o.CONST,a.constraints.push({view1:a.item.view,attr1:a.attr1,relation:a.item.constraints[e].relation,view2:a.item.constraints[e].view,attr2:a.attr2,multiplier:a.item.constraints[e].multiplier,constant:a.item.constraints[e].constant,priority:a.item.constraints[e].priority});c&&a.item.view!==c&&(a.constraints.push({view1:{name:c,type:"stack"},attr1:a.horizontal?o.HEIGHT:o.WIDTH,relation:p.EQU,view2:a.item.view,attr2:a.horizontal?o.HEIGHT:o.WIDTH}),a.constraints.push({view1:{name:c,type:"stack"},attr1:a.horizontal?o.TOP:o.LEFT,relation:p.EQU,view2:a.item.view,attr2:a.horizontal?o.TOP:o.LEFT})),a.item.cascade&&g(a,a.item.cascade,a.item.view)}else a.relation=a.item[0]}function h(a,b){if(w){var d=new c.Variable({value:b});return this._solver.addConstraint(new c.StayConstraint(d,c.Strength.required,0)),d}var d=new n.Variable;return this._solver.addConstraint(new n.Constraint(d,n.Operator.Eq,0)),d}function i(a){return a?a.name?(this._subViews[a.name]=this._subViews[a.name]||new v({name:a.name,solver:this._solver}),this._subViews[a.name]._type=this._subViews[a.name]._type||a.type,this._subViews[a.name]):(this._subViews[a]=this._subViews[a]||new v({name:a,solver:this._solver}),this._subViews[a]):this._parentSubView}function j(a){var b=4;if(a.view1||"left"!==a.attr1)if(a.view1||"top"!==a.attr1)if(a.view2||"right"!==a.attr2)if(a.view2||"bottom"!==a.attr2)switch(a.attr1){case"left":case"right":case"centerX":case"leading":case"trailing":b=4;break;case"zIndex":b=6;break;default:b=5}else b=2;else b=1;else b=0;else b=3;return this._spacingVars=this._spacingVars||new Array(7),this._spacingExpr=this._spacingExpr||new Array(7),this._spacingVars[b]||(w?(this._spacingVars[b]=new c.Variable,this._solver.addEditVar(this._spacingVars[b]),this._spacingExpr[b]=c.minus(0,this._spacingVars[b])):(this._spacingVars[b]=new n.Variable,this._solver.addEditVariable(this._spacingVars[b],n.Strength.create(999,1e3,1e3)),this._spacingExpr[b]=this._spacingVars[b].multiply(-1)),this._solver.suggestValue(this._spacingVars[b],this._spacing[b])),this._spacingExpr[b]}function k(a){var b=void 0,d=void 0!==a.multiplier?a.multiplier:1,e=void 0!==a.constant?a.constant:0;"default"===e&&(e=j.call(this,a));var f=i.call(this,a.view1)._getAttr(a.attr1),g=void 0;a.attr2===o.CONST?g=h.call(this,void 0,a.constant):(g=i.call(this,a.view2)._getAttr(a.attr2),1!==d&&e?g=c.plus(c.times(g,d),e):e?g=c.plus(g,e):1!==d&&(g=c.times(g,d)));var k=void 0!==a.priority&&a.priority<1e3?new c.Strength("priority",0,a.priority,1e3):x;switch(a.relation){case p.EQU:b=new c.Equation(f,g,k);break;case p.GEQ:b=new c.Inequality(f,c.GEQ,g,k);break;case p.LEQ:b=new c.Inequality(f,c.LEQ,g,k);break;default:throw"Invalid relation specified: "+a.relation}this._solver.addConstraint(b)}function l(a){var b=void 0,c=void 0!==a.multiplier?a.multiplier:1,d=void 0!==a.constant?a.constant:0;"default"===d&&(d=j.call(this,a));var e=i.call(this,a.view1)._getAttr(a.attr1),f=void 0;a.attr2===o.CONST?f=h.call(this,void 0,a.constant):(f=i.call(this,a.view2)._getAttr(a.attr2),1!==c&&d?f=f.multiply(c).plus(d):d?f=f.plus(d):1!==c&&(f=f.multiply(c)));var g=void 0!==a.priority&&a.priority<1e3?n.Strength.create(0,a.priority,1e3):x;switch(a.relation){case p.EQU:b=new n.Constraint(e,n.Operator.Eq,f,g);break;case p.GEQ:b=new n.Constraint(e,n.Operator.Ge,f,g);break;case p.LEQ:b=new n.Constraint(e,n.Operator.Le,f,g);break;default:throw"Invalid relation specified: "+a.relation}this._solver.addConstraint(b)}var m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=a("kiwi/ts/bin/kiwi"),o={CONST:"const",NOTANATTRIBUTE:"const",VARIABLE:"var",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",WIDTH:"width",HEIGHT:"height",CENTERX:"centerX",CENTERY:"centerY",ZINDEX:"zIndex"},p={LEQ:"leq",EQU:"equ",GEQ:"geq"},q={REQUIRED:1e3,DEFAULTHIGH:750,DEFAULTLOW:250},r=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return Ca}function d(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return Da!==b&&(Da>b&&(Da=0,Ea={line:1,column:1,seenCR:!1}),c(Ea,Da,b),Da=b),Ea}function e(a){Fa>Ba||(Ba>Fa&&(Fa=Ba,Ga=[]),Ga.push(a))}function f(c,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=d(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==c?c:h(e,j),e,j,f,i.line,i.column)}function g(){var b,c,d,f,g,l,m,n;if(b=Ba,c=Ba,d=h(),d!==y?(58===a.charCodeAt(Ba)?(f=D,Ba++):(f=y,0===Ha&&e(E)),f!==y?(d=[d,f],c=d):(Ba=c,c=B)):(Ba=c,c=B),c===y&&(c=C),c!==y)if(d=Ba,f=i(),f!==y?(g=k(),g!==y?(f=[f,g],d=f):(Ba=d,d=B)):(Ba=d,d=B),d===y&&(d=C),d!==y)if(f=j(),f!==y){for(g=[],l=Ba,m=k(),m!==y?(n=j(),n!==y?(m=[m,n],l=m):(Ba=l,l=B)):(Ba=l,l=B);l!==y;)g.push(l),l=Ba,m=k(),m!==y?(n=j(),n!==y?(m=[m,n],l=m):(Ba=l,l=B)):(Ba=l,l=B);g!==y?(l=Ba,m=k(),m!==y?(n=i(),n!==y?(m=[m,n],l=m):(Ba=l,l=B)):(Ba=l,l=B),l===y&&(l=C),l!==y?(Ca=b,c=F(c,d,f,g,l),b=c):(Ba=b,b=B)):(Ba=b,b=B)}else Ba=b,b=B;else Ba=b,b=B;else Ba=b,b=B;return b}function h(){var b,c;return b=Ba,72===a.charCodeAt(Ba)?(c=G,Ba++):(c=y,0===Ha&&e(H)),c===y&&(86===a.charCodeAt(Ba)?(c=I,Ba++):(c=y,0===Ha&&e(J))),c!==y&&(Ca=b,c=K(c)),b=c}function i(){var b,c;return b=Ba,124===a.charCodeAt(Ba)?(c=L,Ba++):(c=y,0===Ha&&e(M)),c!==y&&(Ca=b,c=N()),b=c}function j(){var b,c,d,f,g;return b=Ba,91===a.charCodeAt(Ba)?(c=O,Ba++):(c=y,0===Ha&&e(P)),c!==y?(d=t(),d!==y?(f=n(),f===y&&(f=C),f!==y?(93===a.charCodeAt(Ba)?(g=Q,Ba++):(g=y,0===Ha&&e(R)),g!==y?(Ca=b,c=S(d,f),b=c):(Ba=b,b=B)):(Ba=b,b=B)):(Ba=b,b=B)):(Ba=b,b=B),b}function k(){var b,c,d,f;return b=Ba,45===a.charCodeAt(Ba)?(c=T,Ba++):(c=y,0===Ha&&e(U)),c!==y?(d=l(),d!==y?(45===a.charCodeAt(Ba)?(f=T,Ba++):(f=y,0===Ha&&e(U)),f!==y?(Ca=b,c=V(d),b=c):(Ba=b,b=B)):(Ba=b,b=B)):(Ba=b,b=B),b===y&&(b=Ba,45===a.charCodeAt(Ba)?(c=T,Ba++):(c=y,0===Ha&&e(U)),c!==y&&(Ca=b,c=W()),b=c,b===y&&(b=Ba,c=X,c!==y&&(Ca=b,c=Y()),b=c)),b}function l(){var a;return a=m(),a===y&&(a=n()),a}function m(){var a,b;return a=Ba,b=u(),b!==y&&(Ca=a,b=Z(b)),a=b}function n(){var b,c,d,f,g,h,i;if(b=Ba,40===a.charCodeAt(Ba)?(c=$,Ba++):(c=y,0===Ha&&e(_)),c!==y)if(d=o(),d!==y){for(f=[],g=Ba,44===a.charCodeAt(Ba)?(h=aa,Ba++):(h=y,0===Ha&&e(ba)),h!==y?(i=o(),i!==y?(h=[h,i],g=h):(Ba=g,g=B)):(Ba=g,g=B);g!==y;)f.push(g),g=Ba,44===a.charCodeAt(Ba)?(h=aa,Ba++):(h=y,0===Ha&&e(ba)),h!==y?(i=o(),i!==y?(h=[h,i],g=h):(Ba=g,g=B)):(Ba=g,g=B);f!==y?(41===a.charCodeAt(Ba)?(g=ca,Ba++):(g=y,0===Ha&&e(da)),g!==y?(Ca=b,c=ea(d,f),b=c):(Ba=b,b=B)):(Ba=b,b=B)}else Ba=b,b=B;else Ba=b,b=B;return b}function o(){var b,c,d,f,g,h;return b=Ba,c=p(),c===y&&(c=C),c!==y?(d=q(),d!==y?(f=Ba,64===a.charCodeAt(Ba)?(g=fa,Ba++):(g=y,0===Ha&&e(ga)),g!==y?(h=r(),h!==y?(g=[g,h],f=g):(Ba=f,f=B)):(Ba=f,f=B),f===y&&(f=C),f!==y?(Ca=b,c=ha(c,d,f),b=c):(Ba=b,b=B)):(Ba=b,b=B)):(Ba=b,b=B),b}function p(){var b,c;return b=Ba,a.substr(Ba,2)===ia?(c=ia,Ba+=2):(c=y,0===Ha&&e(ja)),c!==y&&(Ca=b,c=ka()),b=c,b===y&&(b=Ba,a.substr(Ba,2)===la?(c=la,Ba+=2):(c=y,0===Ha&&e(ma)),c!==y&&(Ca=b,c=na()),b=c,b===y&&(b=Ba,a.substr(Ba,2)===oa?(c=oa,Ba+=2):(c=y,0===Ha&&e(pa)),c!==y&&(Ca=b,c=qa()),b=c)),b}function q(){var a;return a=s(),a===y&&(a=t()),a}function r(){var a,b;return a=Ba,b=u(),b!==y&&(Ca=a,b=ra(b)),a=b}function s(){var a,b;return a=Ba,b=u(),b!==y&&(Ca=a,b=sa(b)),a=b}function t(){var b,c,d,f,g;if(b=Ba,c=Ba,d=[],ta.test(a.charAt(Ba))?(f=a.charAt(Ba),Ba++):(f=y,0===Ha&&e(ua)),f!==y)for(;f!==y;)d.push(f),ta.test(a.charAt(Ba))?(f=a.charAt(Ba),Ba++):(f=y,0===Ha&&e(ua));else d=B;if(d!==y&&(d=a.substring(c,Ba)),c=d,c!==y){for(d=Ba,f=[],va.test(a.charAt(Ba))?(g=a.charAt(Ba),Ba++):(g=y,0===Ha&&e(wa));g!==y;)f.push(g),va.test(a.charAt(Ba))?(g=a.charAt(Ba),Ba++):(g=y,0===Ha&&e(wa));f!==y&&(f=a.substring(d,Ba)),d=f,d!==y?(Ca=b,c=xa(c,d),b=c):(Ba=b,b=B)}else Ba=b,b=B;return b}function u(){var b,c,d;if(b=Ba,c=[],ya.test(a.charAt(Ba))?(d=a.charAt(Ba),Ba++):(d=y,0===Ha&&e(za)),d!==y)for(;d!==y;)c.push(d),ya.test(a.charAt(Ba))?(d=a.charAt(Ba),Ba++):(d=y,0===Ha&&e(za));else c=B;return c!==y&&(Ca=b,c=Aa(c)),b=c}function v(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}var w,x=arguments.length>1?arguments[1]:{},y={},z={visualFormatString:g},A=g,B=y,C=null,D=":",E={type:"literal",value:":",description:'":"'},F=function(a,b,c,d,e){return{orientation:a?a[0]:"horizontal",cascade:(b||[]).concat([c],[].concat.apply([],d),e||[])}},G="H",H={type:"literal",value:"H",description:'"H"'},I="V",J={type:"literal",value:"V",description:'"V"'},K=function(a){return"H"==a?"horizontal":"vertical"},L="|",M={type:"literal",value:"|",description:'"|"'},N=function(){return{view:null}},O="[",P={type:"literal",value:"[",description:'"["'},Q="]",R={type:"literal",value:"]",description:'"]"'},S=function(a,b){return v(a,b?{constraints:b}:{})},T="-",U={type:"literal",value:"-",description:'"-"'},V=function(a){return a},W=function(){return[{relation:"equ",constant:"default",$parserOffset:c()}]},X="",Y=function(){return[{relation:"equ",constant:0,$parserOffset:c()}]},Z=function(a){return[{relation:"equ",constant:a,$parserOffset:c()}]},$="(",_={type:"literal",value:"(",description:'"("'},aa=",",ba={type:"literal",value:",",description:'","'},ca=")",da={type:"literal",value:")",description:'")"'},ea=function(a,b){return[a].concat(b.map(function(a){return a[1]}))},fa="@",ga={type:"literal",value:"@",description:'"@"'},ha=function(a,b,c){return v({relation:"equ"},a||{},b,c?c[1]:{})},ia="==",ja={type:"literal",value:"==",description:'"=="'},ka=function(){return{relation:"equ",$parserOffset:c()}},la="<=",ma={type:"literal",value:"<=",description:'"<="'},na=function(){return{relation:"leq",$parserOffset:c()}},oa=">=",pa={type:"literal",value:">=",description:'">="'},qa=function(){return{relation:"geq",$parserOffset:c()}},ra=function(a){return{priority:a}},sa=function(a){return{constant:a}},ta=/^[a-zA-Z_]/,ua={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},va=/^[a-zA-Z0-9_]/,wa={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},xa=function(a,b){return{view:a+b}},ya=/^[0-9]/,za={type:"class",value:"[0-9]",description:"[0-9]"},Aa=function(a){return parseInt(a.join(""),10)},Ba=0,Ca=0,Da=0,Ea={line:1,column:1,seenCR:!1},Fa=0,Ga=[],Ha=0;if("startRule"in x){if(!(x.startRule in z))throw new Error("Can't start parsing from rule \""+x.startRule+'".');A=z[x.startRule]}if(w=A(),w!==y&&Ba===a.length)return w;throw w!==y&&Ba<a.length&&e({type:"end",description:"end of input"}),f(null,Ga,Fa)}return a(b,Error),{SyntaxError:b,parse:c}}(),s=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return Gb}function d(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return Hb!==b&&(Hb>b&&(Hb=0,Ib={line:1,column:1,seenCR:!1}),c(Ib,Hb,b),Hb=b),Ib}function e(a){Jb>Fb||(Fb>Jb&&(Jb=Fb,Kb=[]),Kb.push(a))}function f(c,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=d(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==c?c:h(e,j),e,j,f,i.line,i.column)}function g(){var b,c,d,f,g,l,n,o;if(b=Fb,c=Fb,d=h(),d!==H?(58===a.charCodeAt(Fb)?(f=M,Fb++):(f=H,0===Lb&&e(N)),f!==H?(d=[d,f],c=d):(Fb=c,c=K)):(Fb=c,c=K),c===H&&(c=L),c!==H)if(d=Fb,f=j(),f!==H?(g=m(),g!==H?(f=[f,g],d=f):(Fb=d,d=K)):(Fb=d,d=K),d===H&&(d=L),d!==H)if(f=k(),f!==H){for(g=[],l=Fb,n=m(),n!==H?(o=k(),o!==H?(n=[n,o],l=n):(Fb=l,l=K)):(Fb=l,l=K);l!==H;)g.push(l),l=Fb,n=m(),n!==H?(o=k(),o!==H?(n=[n,o],l=n):(Fb=l,l=K)):(Fb=l,l=K);g!==H?(l=Fb,n=m(),n!==H?(o=j(),o!==H?(n=[n,o],l=n):(Fb=l,l=K)):(Fb=l,l=K),l===H&&(l=L),l!==H?(n=i(),n===H&&(n=L),n!==H?(Gb=b,c=O(c,d,f,g,l,n),b=c):(Fb=b,b=K)):(Fb=b,b=K)):(Fb=b,b=K)}else Fb=b,b=K;else Fb=b,b=K;else Fb=b,b=K;return b}function h(){var b,c;return b=Fb,72===a.charCodeAt(Fb)?(c=P,Fb++):(c=H,0===Lb&&e(Q)),c===H&&(86===a.charCodeAt(Fb)?(c=R,Fb++):(c=H,0===Lb&&e(S)),c===H&&(90===a.charCodeAt(Fb)?(c=T,Fb++):(c=H,0===Lb&&e(U)))),c!==H&&(Gb=b,c=V(c)),b=c}function i(){var b,c,d,f,g;for(b=Fb,c=[],32===a.charCodeAt(Fb)?(d=W,Fb++):(d=H,0===Lb&&e(X));d!==H;)c.push(d),32===a.charCodeAt(Fb)?(d=W,Fb++):(d=H,0===Lb&&e(X));if(c!==H)if(a.substr(Fb,2)===Y?(d=Y,Fb+=2):(d=H,0===Lb&&e(Z)),d!==H){for(f=[],a.length>Fb?(g=a.charAt(Fb),Fb++):(g=H,0===Lb&&e($));g!==H;)f.push(g),a.length>Fb?(g=a.charAt(Fb),Fb++):(g=H,0===Lb&&e($));f!==H?(c=[c,d,f],b=c):(Fb=b,b=K)}else Fb=b,b=K;else Fb=b,b=K;return b}function j(){var b,c;return b=Fb,124===a.charCodeAt(Fb)?(c=_,Fb++):(c=H,0===Lb&&e(aa)),c!==H&&(Gb=b,c=ba()),b=c}function k(){var b,c,d,f,g,h;return b=Fb,91===a.charCodeAt(Fb)?(c=ca,Fb++):(c=H,0===Lb&&e(da)),c!==H?(d=C(),d!==H?(f=p(),f===H&&(f=L),f!==H?(g=l(),g===H&&(g=L),g!==H?(93===a.charCodeAt(Fb)?(h=ea,Fb++):(h=H,0===Lb&&e(fa)),h!==H?(Gb=b,c=ga(d,f,g),b=c):(Fb=b,b=K)):(Fb=b,b=K)):(Fb=b,b=K)):(Fb=b,b=K)):(Fb=b,b=K),b}function l(){var b,c,d,f,g,h;if(b=Fb,58===a.charCodeAt(Fb)?(c=M,Fb++):(c=H,0===Lb&&e(N)),c!==H){if(d=[],f=Fb,g=m(),g!==H?(h=k(),h!==H?(g=[g,h],f=g):(Fb=f,f=K)):(Fb=f,f=K),f!==H)for(;f!==H;)d.push(f),f=Fb,g=m(),g!==H?(h=k(),h!==H?(g=[g,h],f=g):(Fb=f,f=K)):(Fb=f,f=K);else d=K;d!==H?(f=m(),f!==H?(Gb=b,c=ha(d,f),b=c):(Fb=b,b=K)):(Fb=b,b=K)}else Fb=b,b=K;return b}function m(){var b,c,d,f;return b=Fb,45===a.charCodeAt(Fb)?(c=ia,Fb++):(c=H,0===Lb&&e(ja)),c!==H?(d=n(),d!==H?(45===a.charCodeAt(Fb)?(f=ia,Fb++):(f=H,0===Lb&&e(ja)),f!==H?(Gb=b,c=ka(d),b=c):(Fb=b,b=K)):(Fb=b,b=K)):(Fb=b,b=K),b===H&&(b=Fb,45===a.charCodeAt(Fb)?(c=ia,Fb++):(c=H,0===Lb&&e(ja)),c!==H&&(Gb=b,c=la()),b=c,b===H&&(b=Fb,126===a.charCodeAt(Fb)?(c=ma,Fb++):(c=H,0===Lb&&e(na)),c!==H?(d=r(),d!==H?(126===a.charCodeAt(Fb)?(f=ma,Fb++):(f=H,0===Lb&&e(na)),f!==H?(Gb=b,c=ka(d),b=c):(Fb=b,b=K)):(Fb=b,b=K)):(Fb=b,b=K),b===H&&(b=Fb,126===a.charCodeAt(Fb)?(c=ma,Fb++):(c=H,0===Lb&&e(na)),c!==H&&(Gb=b,c=oa()),b=c,b===H&&(b=Fb,c=pa,c!==H&&(Gb=b,c=qa()),b=c)))),b}function n(){var a;return a=o(),a===H&&(a=p()),a}function o(){var a,b;return a=Fb,b=D(),b!==H&&(Gb=a,b=ra(b)),a=b}function p(){var b,c,d,f,g,h,i;if(b=Fb,40===a.charCodeAt(Fb)?(c=sa,Fb++):(c=H,0===Lb&&e(ta)),c!==H)if(d=q(),d!==H){for(f=[],g=Fb,44===a.charCodeAt(Fb)?(h=ua,Fb++):(h=H,0===Lb&&e(va)),h!==H?(i=q(),i!==H?(h=[h,i],g=h):(Fb=g,g=K)):(Fb=g,g=K);g!==H;)f.push(g),g=Fb,44===a.charCodeAt(Fb)?(h=ua,Fb++):(h=H,0===Lb&&e(va)),h!==H?(i=q(),i!==H?(h=[h,i],g=h):(Fb=g,g=K)):(Fb=g,g=K);f!==H?(41===a.charCodeAt(Fb)?(g=wa,Fb++):(g=H,0===Lb&&e(xa)),g!==H?(Gb=b,c=ya(d,f),b=c):(Fb=b,b=K)):(Fb=b,b=K)}else Fb=b,b=K;else Fb=b,b=K;return b}function q(){var b,c,d,f,g,h;return b=Fb,c=t(),c===H&&(c=L),c!==H?(d=u(),d!==H?(f=Fb,64===a.charCodeAt(Fb)?(g=za,Fb++):(g=H,0===Lb&&e(Aa)),g!==H?(h=v(),h!==H?(g=[g,h],f=g):(Fb=f,f=K)):(Fb=f,f=K),f===H&&(f=L),f!==H?(Gb=b,c=Ba(c,d,f),b=c):(Fb=b,b=K)):(Fb=b,b=K)):(Fb=b,b=K),b}function r(){var b,c,d,f,g,h,i;if(b=Fb,40===a.charCodeAt(Fb)?(c=sa,Fb++):(c=H,0===Lb&&e(ta)),c!==H)if(d=s(),d!==H){for(f=[],g=Fb,44===a.charCodeAt(Fb)?(h=ua,Fb++):(h=H,0===Lb&&e(va)),h!==H?(i=s(),i!==H?(h=[h,i],g=h):(Fb=g,g=K)):(Fb=g,g=K);g!==H;)f.push(g),g=Fb,44===a.charCodeAt(Fb)?(h=ua,Fb++):(h=H,0===Lb&&e(va)),h!==H?(i=s(),i!==H?(h=[h,i],g=h):(Fb=g,g=K)):(Fb=g,g=K);f!==H?(41===a.charCodeAt(Fb)?(g=wa,Fb++):(g=H,0===Lb&&e(xa)),g!==H?(Gb=b,c=ya(d,f),b=c):(Fb=b,b=K)):(Fb=b,b=K)}else Fb=b,b=K;else Fb=b,b=K;return b}function s(){var b,c,d,f,g,h;return b=Fb,c=t(),c===H&&(c=L),c!==H?(d=u(),d!==H?(f=Fb,64===a.charCodeAt(Fb)?(g=za,Fb++):(g=H,0===Lb&&e(Aa)),g!==H?(h=v(),h!==H?(g=[g,h],f=g):(Fb=f,f=K)):(Fb=f,f=K),f===H&&(f=L),f!==H?(Gb=b,c=Ca(c,d,f),b=c):(Fb=b,b=K)):(Fb=b,b=K)):(Fb=b,b=K),b}function t(){var b,c;return b=Fb,a.substr(Fb,2)===Da?(c=Da,Fb+=2):(c=H,0===Lb&&e(Ea)),c!==H&&(Gb=b,c=Fa()),b=c,b===H&&(b=Fb,a.substr(Fb,2)===Ga?(c=Ga,Fb+=2):(c=H,0===Lb&&e(Ha)),c!==H&&(Gb=b,c=Ia()),b=c,b===H&&(b=Fb,a.substr(Fb,2)===Ja?(c=Ja,Fb+=2):(c=H,0===Lb&&e(Ka)),c!==H&&(Gb=b,c=La()),b=c)),b}function u(){var a;return a=x(),a===H&&(a=w(),a===H&&(a=y())),a}function v(){var a,b;return a=Fb,b=D(),b!==H&&(Gb=a,b=Ma(b)),a=b}function w(){var a,b;return a=Fb,b=D(),b!==H&&(Gb=a,b=Na(b)),a=b}function x(){var b,c,d;return b=Fb,c=D(),c!==H?(37===a.charCodeAt(Fb)?(d=Oa,Fb++):(d=H,0===Lb&&e(Pa)),d!==H?(Gb=b,c=Qa(c),b=c):(Fb=b,b=K)):(Fb=b,b=K),b}function y(){var a,b,c,d,e;return a=Fb,b=C(),b!==H?(c=z(),c===H&&(c=L),c!==H?(d=A(),d===H&&(d=L),d!==H?(e=B(),e===H&&(e=L),e!==H?(Gb=a,b=Ra(b,c,d,e),a=b):(Fb=a,a=K)):(Fb=a,a=K)):(Fb=a,a=K)):(Fb=a,a=K),a}function z(){var b,c;return b=Fb,a.substr(Fb,5)===Sa?(c=Sa,Fb+=5):(c=H,0===Lb&&e(Ta)),c!==H&&(Gb=b,c=Ua()),b=c,b===H&&(b=Fb,a.substr(Fb,6)===Va?(c=Va,Fb+=6):(c=H,0===Lb&&e(Wa)),c!==H&&(Gb=b,c=Xa()),b=c,b===H&&(b=Fb,a.substr(Fb,4)===Ya?(c=Ya,Fb+=4):(c=H,0===Lb&&e(Za)),c!==H&&(Gb=b,c=$a()),b=c,b===H&&(b=Fb,a.substr(Fb,7)===_a?(c=_a,Fb+=7):(c=H,0===Lb&&e(ab)),c!==H&&(Gb=b,c=bb()),b=c,b===H&&(b=Fb,a.substr(Fb,6)===cb?(c=cb,Fb+=6):(c=H,0===Lb&&e(db)),c!==H&&(Gb=b,c=eb()),b=c,b===H&&(b=Fb,a.substr(Fb,7)===fb?(c=fb,Fb+=7):(c=H,0===Lb&&e(gb)),c!==H&&(Gb=b,c=hb()),b=c,b===H&&(b=Fb,a.substr(Fb,8)===ib?(c=ib,Fb+=8):(c=H,0===Lb&&e(jb)),c!==H&&(Gb=b,c=kb()),b=c,b===H&&(b=Fb,a.substr(Fb,8)===lb?(c=lb,Fb+=8):(c=H,0===Lb&&e(mb)),c!==H&&(Gb=b,c=nb()),b=c))))))),b}function A(){var b,c,d;return b=Fb,47===a.charCodeAt(Fb)?(c=ob,Fb++):(c=H,0===Lb&&e(pb)),c!==H?(d=D(),d!==H?(Gb=b,c=qb(d),b=c):(Fb=b,b=K)):(Fb=b,b=K),b===H&&(b=Fb,42===a.charCodeAt(Fb)?(c=rb,Fb++):(c=H,0===Lb&&e(sb)),c!==H?(d=D(),d!==H?(Gb=b,c=tb(d),b=c):(Fb=b,b=K)):(Fb=b,b=K)),b}function B(){var b,c,d;return b=Fb,45===a.charCodeAt(Fb)?(c=ia,Fb++):(c=H,0===Lb&&e(ja)),c!==H?(d=D(),d!==H?(Gb=b,c=ub(d),b=c):(Fb=b,b=K)):(Fb=b,b=K),b===H&&(b=Fb,43===a.charCodeAt(Fb)?(c=vb,Fb++):(c=H,0===Lb&&e(wb)),c!==H?(d=D(),d!==H?(Gb=b,c=tb(d),b=c):(Fb=b,b=K)):(Fb=b,b=K)),b}function C(){var b,c,d,f,g;if(b=Fb,c=Fb,d=[],xb.test(a.charAt(Fb))?(f=a.charAt(Fb),Fb++):(f=H,0===Lb&&e(yb)),f!==H)for(;f!==H;)d.push(f),xb.test(a.charAt(Fb))?(f=a.charAt(Fb),Fb++):(f=H,0===Lb&&e(yb));else d=K;if(d!==H&&(d=a.substring(c,Fb)),c=d,c!==H){for(d=Fb,f=[],zb.test(a.charAt(Fb))?(g=a.charAt(Fb),Fb++):(g=H,0===Lb&&e(Ab));g!==H;)f.push(g),zb.test(a.charAt(Fb))?(g=a.charAt(Fb),Fb++):(g=H,0===Lb&&e(Ab));f!==H&&(f=a.substring(d,Fb)),d=f,d!==H?(Gb=b,c=Bb(c,d),b=c):(Fb=b,b=K)}else Fb=b,b=K;return b}function D(){var b,c,d;if(b=Fb,c=[],Cb.test(a.charAt(Fb))?(d=a.charAt(Fb),Fb++):(d=H,0===Lb&&e(Db)),d!==H)for(;d!==H;)c.push(d),Cb.test(a.charAt(Fb))?(d=a.charAt(Fb),Fb++):(d=H,0===Lb&&e(Db));else c=K;return c!==H&&(Gb=b,c=Eb(c)),b=c}function E(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}var F,G=arguments.length>1?arguments[1]:{},H={},I={visualFormatString:g},J=g,K=H,L=null,M=":",N={type:"literal",value:":",description:'":"'},O=function(a,b,c,d,e,f){return{orientation:a?a[0]:"horizontal",cascade:(b||[]).concat([c],[].concat.apply([],d),e||[])}},P="H",Q={type:"literal",value:"H",description:'"H"'},R="V",S={type:"literal",value:"V",description:'"V"'},T="Z",U={type:"literal",value:"Z",description:'"Z"'},V=function(a){return"H"==a?"horizontal":"V"==a?"vertical":"zIndex"},W=" ",X={type:"literal",value:" ",description:'" "'},Y="//",Z={type:"literal",value:"//",description:'"//"'},$={type:"any",description:"any character"},_="|",aa={type:"literal",value:"|",description:'"|"'},ba=function(){return{view:null}},ca="[",da={type:"literal",value:"[",description:'"["'},ea="]",fa={type:"literal",value:"]",description:'"]"'},ga=function(a,b,c){return E(E(a,b?{constraints:b}:{}),c?{cascade:c}:{})},ha=function(a,b){return[].concat([].concat.apply([],a),[b])},ia="-",ja={type:"literal",value:"-",description:'"-"'},ka=function(a){return a},la=function(){return[{relation:"equ",constant:"default",$parserOffset:c()}]},ma="~",na={type:"literal",value:"~",description:'"~"'},oa=function(){return[{relation:"equ",equalSpacing:!0,$parserOffset:c()}]},pa="",qa=function(){return[{relation:"equ",constant:0,$parserOffset:c()}]},ra=function(a){return[{relation:"equ",constant:a,$parserOffset:c()}]},sa="(",ta={type:"literal",value:"(",description:'"("'},ua=",",va={type:"literal",value:",",description:'","'},wa=")",xa={type:"literal",value:")",description:'")"'},ya=function(a,b){return[a].concat(b.map(function(a){return a[1]}))},za="@",Aa={type:"literal",value:"@",description:'"@"'},Ba=function(a,b,c){return E({relation:"equ"},a||{},b,c?c[1]:{})},Ca=function(a,b,c){return E({relation:"equ",equalSpacing:!0},a||{},b,c?c[1]:{})},Da="==",Ea={type:"literal",value:"==",description:'"=="'},Fa=function(){return{relation:"equ",$parserOffset:c()}},Ga="<=",Ha={type:"literal",value:"<=",description:'"<="'},Ia=function(){return{relation:"leq",$parserOffset:c()}},Ja=">=",Ka={type:"literal",value:">=",description:'">="'},La=function(){return{relation:"geq",$parserOffset:c()}},Ma=function(a){return{priority:a}},Na=function(a){return{constant:a}},Oa="%",Pa={type:"literal",value:"%",description:'"%"'},Qa=function(a){return{view:null,multiplier:a/100}},Ra=function(a,b,c,d){return{view:a.view,attribute:b?b:void 0,multiplier:c?c:1,constant:d?d:void 0}},Sa=".left",Ta={type:"literal",value:".left",description:'".left"'},Ua=function(){return"left"},Va=".right",Wa={type:"literal",value:".right",description:'".right"'},Xa=function(){return"right"},Ya=".top",Za={type:"literal",value:".top",description:'".top"'},$a=function(){return"top"},_a=".bottom",ab={type:"literal",value:".bottom",description:'".bottom"'},bb=function(){return"bottom"},cb=".width",db={type:"literal",value:".width",description:'".width"'},eb=function(){return"width"},fb=".height",gb={type:"literal",value:".height",description:'".height"'},hb=function(){return"height"},ib=".centerX",jb={type:"literal",value:".centerX",description:'".centerX"'},kb=function(){return"centerX"},lb=".centerY",mb={type:"literal",value:".centerY",description:'".centerY"'},nb=function(){return"centerY"},ob="/",pb={type:"literal",value:"/",description:'"/"'},qb=function(a){return 1/a},rb="*",sb={type:"literal",value:"*",description:'"*"'},tb=function(a){return a},ub=function(a){return-a},vb="+",wb={type:"literal",value:"+",description:'"+"'},xb=/^[a-zA-Z_]/,yb={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},zb=/^[a-zA-Z0-9_]/,Ab={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},Bb=function(a,b){return{view:a+b}},Cb=/^[0-9]/,Db={type:"class",value:"[0-9]",description:"[0-9]"},Eb=function(a){return parseInt(a.join(""),10)},Fb=0,Gb=0,Hb=0,Ib={line:1,column:1,seenCR:!1},Jb=0,Kb=[],Lb=0;if("startRule"in G){if(!(G.startRule in I))throw new Error("Can't start parsing from rule \""+G.startRule+'".');J=I[G.startRule]}if(F=J(),F!==H&&Fb===a.length)return F;throw F!==H&&Fb<a.length&&e({type:"end",description:"end of input"}),f(null,Kb,Jb)}return a(b,Error),{SyntaxError:b,parse:c}}(),t=function(){function a(){e(this,a)}return m(a,null,[{key:"parseLine",value:function(a,b){if(0===a.length||b&&b.extended&&0===a.indexOf("//"))return[];var c=b&&b.extended?s.parse(a):r.parse(a);if(b&&"raw"===b.outFormat)return[c];var d={orientation:c.orientation,horizontal:"horizontal"===c.orientation,constraints:[],lineIndex:(b?b.lineIndex:void 0)||1};return g(d,c.cascade,null),d.constraints}},{key:"parse",value:function(a,b){var c=b&&b.lineSeperator?b.lineSeperator:"\n";if(!Array.isArray(a)&&a.indexOf(c)<0)try{return this.parseLine(a,b)}catch(d){throw d.source=a,d}a=Array.isArray(a)?a:[a];var e=void 0,f=[],g=0,h=void 0,i={lineIndex:g,extended:b&&b.extended,outFormat:b?b.outFormat:void 0};try{for(var j=0;j<a.length;j++){e=a[j].split(c);for(var k=0;k<e.length;k++)h=e[k],g++,i.lineIndex=g,f=f.concat(this.parseLine(h,i))}}catch(d){throw d.source=h,d.line=g,d}return f}}]),a}(),u=!1,v=function(){function a(b){e(this,a),this._name=b.name,this._type=b.type,this._solver=b.solver,this._attr={},b.name||(u?(this._attr[o.LEFT]=new c.Variable,this._solver.addConstraint(new c.StayConstraint(this._attr[o.LEFT],c.Strength.required)),this._attr[o.TOP]=new c.Variable,this._solver.addConstraint(new c.StayConstraint(this._attr[o.TOP],c.Strength.required)),this._attr[o.ZINDEX]=new c.Variable,this._solver.addConstraint(new c.StayConstraint(this._attr[o.ZINDEX],c.Strength.required))):(this._attr[o.LEFT]=new n.Variable,this._solver.addConstraint(new n.Constraint(this._attr[o.LEFT],n.Operator.Eq,0)),this._attr[o.TOP]=new n.Variable,this._solver.addConstraint(new n.Constraint(this._attr[o.TOP],n.Operator.Eq,0)),this._attr[o.ZINDEX]=new n.Variable,this._solver.addConstraint(new n.Constraint(this._attr[o.ZINDEX],n.Operator.Eq,0))))}return m(a,[{key:"toJSON",value:function(){return{name:this.name,left:this.left,top:this.top,width:this.width,height:this.height}}},{key:"toString",value:function(){JSON.stringify(this.toJSON(),void 0,2)}},{key:"name",get:function(){return this._name}},{key:"left",get:function(){return this._getAttr(o.LEFT).value()}},{key:"right",get:function(){return this._getAttr(o.RIGHT).value()}},{key:"width",get:function(){return this._getAttr(o.WIDTH).value()}},{key:"height",get:function(){return this._getAttr(o.HEIGHT).value()}},{key:"intrinsicWidth",get:function(){return this._intrinsicWidth},set:function(a){if(void 0!==a&&a!==this._intrinsicWidth){var b=this._getAttr(o.WIDTH);void 0===this._intrinsicWidth&&(u?this._solver.addEditVar(b,new c.Strength("required",this._name?998:999,1e3,1e3)):this._solver.addEditVariable(b,n.Strength.create(this._name?998:999,1e3,1e3))),this._intrinsicWidth=a,this._solver.suggestValue(b,a),u?this._solver.resolve():this._solver.updateVariables()}}},{key:"intrinsicHeight",get:function(){return this._intrinsicHeight},set:function(a){if(void 0!==a&&a!==this._intrinsicHeight){var b=this._getAttr(o.HEIGHT);void 0===this._intrinsicHeight&&(u?this._solver.addEditVar(b,new c.Strength("required",this._name?998:999,1e3,1e3)):this._solver.addEditVariable(b,n.Strength.create(this._name?998:999,1e3,1e3))),this._intrinsicHeight=a,this._solver.suggestValue(b,a),u?this._solver.resolve():this._solver.updateVariables()}}},{key:"top",get:function(){return this._getAttr(o.TOP).value()}},{key:"bottom",get:function(){return this._getAttr(o.BOTTOM).value()}},{key:"centerX",get:function(){return this._getAttr(o.CENTERX).value()}},{key:"centerY",get:function(){return this._getAttr(o.CENTERY).value()}},{key:"zIndex",get:function(){return this._getAttr(o.ZINDEX).value()}},{key:"type",get:function(){return this._type}},{key:"getValue",value:function(a){return this._attr[a]?this._attr[a].value():void 0}},{key:"_getAttr",value:function(a){if(this._attr[a])return this._attr[a];
switch(this._attr[a]=u?new c.Variable:new n.Variable,a){case o.RIGHT:this._getAttr(o.LEFT),this._getAttr(o.WIDTH),u?this._solver.addConstraint(new c.Equation(this._attr[a],c.plus(this._attr[o.LEFT],this._attr[o.WIDTH]))):this._solver.addConstraint(new n.Constraint(this._attr[a],n.Operator.Eq,this._attr[o.LEFT].plus(this._attr[o.WIDTH])));break;case o.BOTTOM:this._getAttr(o.TOP),this._getAttr(o.HEIGHT),u?this._solver.addConstraint(new c.Equation(this._attr[a],c.plus(this._attr[o.TOP],this._attr[o.HEIGHT]))):this._solver.addConstraint(new n.Constraint(this._attr[a],n.Operator.Eq,this._attr[o.TOP].plus(this._attr[o.HEIGHT])));break;case o.CENTERX:this._getAttr(o.LEFT),this._getAttr(o.WIDTH),u?this._solver.addConstraint(new c.Equation(this._attr[a],c.plus(this._attr[o.LEFT],c.divide(this._attr[o.WIDTH],2)))):this._solver.addConstraint(new n.Constraint(this._attr[a],n.Operator.Eq,this._attr[o.LEFT].plus(this._attr[o.WIDTH].divide(2))));break;case o.CENTERY:this._getAttr(o.TOP),this._getAttr(o.HEIGHT),u?this._solver.addConstraint(new c.Equation(this._attr[a],c.plus(this._attr[o.TOP],c.divide(this._attr[o.HEIGHT],2)))):this._solver.addConstraint(new n.Constraint(this._attr[a],n.Operator.Eq,this._attr[o.TOP].plus(this._attr[o.HEIGHT].divide(2))))}return u||this._solver.updateVariables(),this._attr[a]}}]),a}(),w=!1,x=w?new c.Strength("defaultPriority",0,1e3,1e3):n.Strength.create(0,1e3,1e3),y=function(){function a(b){e(this,a),this._solver=w?new c.SimplexSolver:new n.Solver,this._subViews={},this._spacing={},this._parentSubView=new v({solver:this._solver}),this.setSpacing(b&&void 0!==b.spacing?b.spacing:8),b&&((void 0!==b.width||void 0!==b.height)&&this.setSize(b.width,b.height),b.constraints&&this.addConstraints(b.constraints))}return m(a,[{key:"setSize",value:function(a,b){return this._parentSubView.intrinsicWidth=a,this._parentSubView.intrinsicHeight=b,this}},{key:"width",get:function(){return this._parentSubView.intrinsicWidth}},{key:"height",get:function(){return this._parentSubView.intrinsicHeight}},{key:"fittingWidth",get:function(){return this._parentSubView.width}},{key:"fittingHeight",get:function(){return this._parentSubView.height}},{key:"setSpacing",value:function(a){switch(Array.isArray(a)?a.length:-1){case-1:a=[a,a,a,a,a,a,1];break;case 1:a=[a[0],a[0],a[0],a[0],a[0],a[0],1];break;case 2:a=[a[1],a[0],a[1],a[0],a[0],a[1],1];break;case 3:a=[a[1],a[0],a[1],a[0],a[0],a[1],a[2]];break;case 6:a=[a[0],a[1],a[2],a[3],a[4],a[5],1];break;case 7:break;default:throw"Invalid spacing syntax"}if(this._spacing=a,this._spacingVars){for(var b=0;b<this._spacingVars.length;b++)this._spacingVars[b]&&this._solver.suggestValue(this._spacingVars[b],this._spacing[b]);w?this._solver.resolve():this._solver.updateVariables()}return this}},{key:"addConstraint",value:function(a){return w?k.call(this,a):(l.call(this,a),this._solver.updateVariables()),this}},{key:"addConstraints",value:function(a){if(w)for(var b=0;b<a.length;b++)k.call(this,a[b]);else{for(var c=0;c<a.length;c++)l.call(this,a[c]);this._solver.updateVariables()}return this}},{key:"subViews",get:function(){return this._subViews}}]),a}(),z={Attribute:o,Relation:p,Priority:q,VisualFormat:t,View:y,SubView:v};b.exports=z},{"kiwi/ts/bin/kiwi":2}],2:[function(b,c,d){!function(b,e){"function"==typeof a&&a.amd?a([],function(){return b.kiwi=e()}):"object"==typeof d?c.exports=e():b.kiwi=e()}(this,function(){var a;!function(a){function b(a){return a instanceof Array?new f(a):a.__iter__()}function c(a){return a instanceof Array?new g(a):a.__reversed__()}function d(a){return a.__next__()}function e(a,b){if(a instanceof Array){for(var c=0,d=a.length;d>c;++c)if(b(a[c])===!1)return}else for(var e,f=a.__iter__();void 0!==(e=f.__next__());)if(b(e)===!1)return}var f=function(){function a(a,b){"undefined"==typeof b&&(b=0),this._array=a,this._index=Math.max(0,Math.min(b,a.length))}return a.prototype.__next__=function(){return this._array[this._index++]},a.prototype.__iter__=function(){return this},a}();a.ArrayIterator=f;var g=function(){function a(a,b){"undefined"==typeof b&&(b=a.length),this._array=a,this._index=Math.max(0,Math.min(b,a.length))}return a.prototype.__next__=function(){return this._array[--this._index]},a.prototype.__iter__=function(){return this},a}();a.ReverseArrayIterator=g,a.iter=b,a.reversed=c,a.next=d,a.forEach=e}(a||(a={}));var a;!function(a){var b=function(){function a(a,b){this.first=a,this.second=b}return a.prototype.copy=function(){return new a(this.first,this.second)},a}();a.Pair=b}(a||(a={}));var a;!function(a){function b(a,b,c){for(var d,e,f=0,g=a.length;g>0;)d=g>>1,e=f+d,c(a[e],b)<0?(f=e+1,g-=d+1):g=d;return f}function c(a,c,d){var e=b(a,c,d);if(e===a.length)return-1;var f=a[e];return 0!==d(f,c)?-1:e}function d(a,c,d){var e=b(a,c,d);if(e===a.length)return void 0;var f=a[e];return 0!==d(f,c)?void 0:f}a.lowerBound=b,a.binarySearch=c,a.binaryFind=d}(a||(a={}));var a;!function(a){var b=function(){function b(){this._array=[]}return b.prototype.size=function(){return this._array.length},b.prototype.empty=function(){return 0===this._array.length},b.prototype.itemAt=function(a){return this._array[a]},b.prototype.takeAt=function(a){return this._array.splice(a,1)[0]},b.prototype.clear=function(){this._array=[]},b.prototype.swap=function(a){var b=this._array;this._array=a._array,a._array=b},b.prototype.__iter__=function(){return a.iter(this._array)},b.prototype.__reversed__=function(){return a.reversed(this._array)},b}();a.ArrayBase=b}(a||(a={}));var a,b=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};!function(a){function c(a){return function(b,c){return a(b.first,c)}}function d(a,b,c){for(var d=0,e=0,f=a.length,g=b.length,h=[];f>d&&g>e;){var i=a[d],j=b[e],k=c(i.first,j.first);0>k?(h.push(i.copy()),++d):k>0?(h.push(j.copy()),++e):(h.push(j.copy()),++d,++e)}for(;f>d;)h.push(a[d].copy()),++d;for(;g>e;)h.push(b[e].copy()),++e;return h}var e=function(e){function f(a){e.call(this),this._compare=a,this._wrapped=c(a)}return b(f,e),f.prototype.comparitor=function(){return this._compare},f.prototype.indexOf=function(b){return a.binarySearch(this._array,b,this._wrapped)},f.prototype.contains=function(b){return a.binarySearch(this._array,b,this._wrapped)>=0},f.prototype.find=function(b){return a.binaryFind(this._array,b,this._wrapped)},f.prototype.setDefault=function(b,c){var d=this._array,e=a.lowerBound(d,b,this._wrapped);if(e===d.length){var f=new a.Pair(b,c());return d.push(f),f}var g=d[e];if(0!==this._compare(g.first,b)){var f=new a.Pair(b,c());return d.splice(e,0,f),f}return g},f.prototype.insert=function(b,c){var d=this._array,e=a.lowerBound(d,b,this._wrapped);if(e===d.length){var f=new a.Pair(b,c);return d.push(f),f}var g=d[e];if(0!==this._compare(g.first,b)){var f=new a.Pair(b,c);return d.splice(e,0,f),f}return g.second=c,g},f.prototype.update=function(b){var c=this;if(b instanceof f){var e=b;this._array=d(this._array,e._array,this._compare)}else a.forEach(b,function(a){c.insert(a.first,a.second)})},f.prototype.erase=function(b){var c=this._array,d=a.binarySearch(c,b,this._wrapped);return 0>d?void 0:c.splice(d,1)[0]},f.prototype.copy=function(){for(var a=new f(this._compare),b=a._array,c=this._array,d=0,e=c.length;e>d;++d)b.push(c[d].copy());return a},f}(a.ArrayBase);a.AssociativeArray=e}(a||(a={}));var c;!function(a){!function(a){a[a.Le=0]="Le",a[a.Ge=1]="Ge",a[a.Eq=2]="Eq"}(a.Operator||(a.Operator={}));var b=(a.Operator,function(){function b(b,d,e,f){void 0===f&&(f=a.Strength.required),this._id=c++,this._operator=d,this._strength=a.Strength.clip(f),void 0===e&&b instanceof a.Expression?this._expression=b:this._expression=b.minus(e)}return b.Compare=function(a,b){return a.id()-b.id()},b.prototype.id=function(){return this._id},b.prototype.expression=function(){return this._expression},b.prototype.op=function(){return this._operator},b.prototype.strength=function(){return this._strength},b}());a.Constraint=b;var c=0}(c||(c={}));var c;!function(b){function c(b){return new a.AssociativeArray(b)}b.createMap=c}(c||(c={}));var c;!function(a){var b=function(){function b(a){void 0===a&&(a=""),this._value=0,this._context=null,this._id=c++,this._name=a}return b.Compare=function(a,b){return a.id()-b.id()},b.prototype.id=function(){return this._id},b.prototype.name=function(){return this._name},b.prototype.setName=function(a){this._name=a},b.prototype.context=function(){return this._context},b.prototype.setContext=function(a){this._context=a},b.prototype.value=function(){return this._value},b.prototype.setValue=function(a){this._value=a},b.prototype.plus=function(b){return new a.Expression(this,b)},b.prototype.minus=function(b){return new a.Expression(this,"number"==typeof b?-b:[-1,b])},b.prototype.multiply=function(b){return new a.Expression([b,this])},b.prototype.divide=function(b){return new a.Expression([1/b,this])},b.prototype.toJSON=function(){return{name:this._name,value:this._value}},b}();a.Variable=b;var c=0}(c||(c={}));var c;!function(a){function b(b){for(var d=0,e=function(){return 0},f=a.createMap(a.Variable.Compare),g=0,h=b.length;h>g;++g){var i=b[g];if("number"==typeof i)d+=i;else if(i instanceof a.Variable)f.setDefault(i,e).second+=1;else if(i instanceof c){d+=i.constant();for(var j=i.terms(),k=0,l=j.size();l>k;k++){var m=j.itemAt(k);f.setDefault(m.first,e).second+=m.second}}else{if(!(i instanceof Array))throw new Error("invalid Expression argument: "+i);if(2!==i.length)throw new Error("array must have length 2");var n=i[0],o=i[1];if("number"!=typeof n)throw new Error("array item 0 must be a number");if(o instanceof a.Variable)f.setDefault(o,e).second+=n;else{if(!(o instanceof c))throw new Error("array item 1 must be a variable or expression");d+=o.constant()*n;for(var j=o.terms(),k=0,l=j.size();l>k;k++){var m=j.itemAt(k);f.setDefault(m.first,e).second+=m.second*n}}}}return{terms:f,constant:d}}var c=function(){function a(){var a=b(arguments);this._terms=a.terms,this._constant=a.constant}return a.prototype.terms=function(){return this._terms},a.prototype.constant=function(){return this._constant},a.prototype.value=function(){for(var a=this._constant,b=0,c=this._terms.size();c>b;b++){var d=this._terms.itemAt(b);a+=d.first.value()*d.second}return a},a.prototype.plus=function(b){return new a(this,b)},a.prototype.minus=function(b){return new a(this,"number"==typeof b?-b:[-1,b])},a.prototype.multiply=function(b){return new a([b,this])},a.prototype.divide=function(b){return new a([1/b,this])},a}();a.Expression=c}(c||(c={}));var c;!function(a){var b;!function(a){function b(a,b,c,d){void 0===d&&(d=1);var e=0;return e+=1e6*Math.max(0,Math.min(1e3,a*d)),e+=1e3*Math.max(0,Math.min(1e3,b*d)),e+=Math.max(0,Math.min(1e3,c*d))}function c(b){return Math.max(0,Math.min(a.required,b))}a.create=b,a.required=b(1e3,1e3,1e3),a.strong=b(1,0,0),a.medium=b(0,1,0),a.weak=b(0,0,1),a.clip=c}(b=a.Strength||(a.Strength={}))}(c||(c={}));var c;return function(a){function b(a){var b=1e-8;return 0>a?b>-a:b>a}function c(){return a.createMap(a.Constraint.Compare)}function d(){return a.createMap(i.Compare)}function e(){return a.createMap(a.Variable.Compare)}function f(){return a.createMap(a.Variable.Compare)}var g=function(){function g(){this._cnMap=c(),this._rowMap=d(),this._varMap=e(),this._editMap=f(),this._infeasibleRows=[],this._objective=new k,this._artificial=null,this._idTick=0}return g.prototype.createConstraint=function(b,c,d,e){void 0===e&&(e=a.Strength.required);var f=new a.Constraint(b,c,d,e);return this.addConstraint(f),f},g.prototype.addConstraint=function(a){var c=this._cnMap.find(a);if(void 0!==c)throw new Error("duplicate constraint");var d=this._createRow(a),e=d.row,f=d.tag,g=this._chooseSubject(e,f);if(0===g.type()&&e.allDummies()){if(!b(e.constant()))throw new Error("unsatifiable constraint");g=f.marker}if(0===g.type()){if(!this._addWithArtificialVariable(e))throw new Error("unsatisfiable constraint")}else e.solveFor(g),this._substitute(g,e),this._rowMap.insert(g,e);this._cnMap.insert(a,f),this._optimize(this._objective)},g.prototype.removeConstraint=function(a){var b=this._cnMap.erase(a);if(void 0===b)throw new Error("unknown constraint");this._removeConstraintEffects(a,b.second);var c=b.second.marker,d=this._rowMap.erase(c);if(void 0===d){var e=this._getMarkerLeavingSymbol(c);if(0===e.type())throw new Error("failed to find leaving row");d=this._rowMap.erase(e),d.second.solveForEx(e,c),this._substitute(c,d.second)}this._optimize(this._objective)},g.prototype.hasConstraint=function(a){return this._cnMap.contains(a)},g.prototype.addEditVariable=function(b,c){var d=this._editMap.find(b);if(void 0!==d)throw new Error("duplicate edit variable");if(c=a.Strength.clip(c),c===a.Strength.required)throw new Error("bad required strength");var e=new a.Expression(b),f=new a.Constraint(e,2,void 0,c);this.addConstraint(f);var g=this._cnMap.find(f).second,h={tag:g,constraint:f,constant:0};this._editMap.insert(b,h)},g.prototype.removeEditVariable=function(a){var b=this._editMap.erase(a);if(void 0===b)throw new Error("unknown edit variable");this.removeConstraint(b.second.constraint)},g.prototype.hasEditVariable=function(a){return this._editMap.contains(a)},g.prototype.suggestValue=function(a,b){var c=this._editMap.find(a);if(void 0===c)throw new Error("unknown edit variable");var d=this._rowMap,e=c.second,f=b-e.constant;e.constant=b;var g=e.tag.marker,h=d.find(g);if(void 0!==h)return h.second.add(-f)<0&&this._infeasibleRows.push(g),void this._dualOptimize();var i=e.tag.other,h=d.find(i);if(void 0!==h)return h.second.add(f)<0&&this._infeasibleRows.push(i),void this._dualOptimize();for(var j=0,k=d.size();k>j;++j){var h=d.itemAt(j),l=h.second,m=l.coefficientFor(g);0!==m&&l.add(f*m)<0&&1!==h.first.type()&&this._infeasibleRows.push(h.first)}this._dualOptimize()},g.prototype.updateVariables=function(){for(var a=this._varMap,b=this._rowMap,c=0,d=a.size();d>c;++c){var e=a.itemAt(c),f=b.find(e.second);void 0!==f?e.first.setValue(f.second.constant()):e.first.setValue(0)}},g.prototype._getVarSymbol=function(a){var b=this,c=function(){return b._makeSymbol(1)};return this._varMap.setDefault(a,c).second},g.prototype._createRow=function(c){for(var d=c.expression(),e=new k(d.constant()),f=d.terms(),g=0,h=f.size();h>g;++g){var i=f.itemAt(g);if(!b(i.second)){var l=this._getVarSymbol(i.first),m=this._rowMap.find(l);void 0!==m?e.insertRow(m.second,i.second):e.insertSymbol(l,i.second)}}var n=this._objective,o=c.strength(),p={marker:j,other:j};switch(c.op()){case 0:case 1:var q=0===c.op()?1:-1,r=this._makeSymbol(2);if(p.marker=r,e.insertSymbol(r,q),o<a.Strength.required){var s=this._makeSymbol(3);p.other=s,e.insertSymbol(s,-q),n.insertSymbol(s,o)}break;case 2:if(o<a.Strength.required){var t=this._makeSymbol(3),u=this._makeSymbol(3);p.marker=t,p.other=u,e.insertSymbol(t,-1),e.insertSymbol(u,1),n.insertSymbol(t,o),n.insertSymbol(u,o)}else{var v=this._makeSymbol(4);p.marker=v,e.insertSymbol(v)}}return e.constant()<0&&e.reverseSign(),{row:e,tag:p}},g.prototype._chooseSubject=function(a,b){for(var c=a.cells(),d=0,e=c.size();e>d;++d){var f=c.itemAt(d);if(1===f.first.type())return f.first}var g=b.marker.type();return(2===g||3===g)&&a.coefficientFor(b.marker)<0?b.marker:(g=b.other.type(),(2===g||3===g)&&a.coefficientFor(b.other)<0?b.other:j)},g.prototype._addWithArtificialVariable=function(a){var c=this._makeSymbol(2);this._rowMap.insert(c,a.copy()),this._artificial=a.copy(),this._optimize(this._artificial);var d=b(this._artificial.constant());this._artificial=null;var e=this._rowMap.erase(c);if(void 0!==e){var f=e.second;if(f.isConstant())return d;var g=this._anyPivotableSymbol(f);if(0===g.type())return!1;f.solveForEx(c,g),this._substitute(g,f),this._rowMap.insert(g,f)}for(var h=this._rowMap,i=0,j=h.size();j>i;++i)h.itemAt(i).second.removeSymbol(c);return this._objective.removeSymbol(c),d},g.prototype._substitute=function(a,b){for(var c=this._rowMap,d=0,e=c.size();e>d;++d){var f=c.itemAt(d);f.second.substitute(a,b),f.second.constant()<0&&1!==f.first.type()&&this._infeasibleRows.push(f.first)}this._objective.substitute(a,b),this._artificial&&this._artificial.substitute(a,b)},g.prototype._optimize=function(a){for(;;){var b=this._getEnteringSymbol(a);if(0===b.type())return;var c=this._getLeavingSymbol(b);if(0===c.type())throw new Error("the objective is unbounded");var d=this._rowMap.erase(c).second;d.solveForEx(c,b),this._substitute(b,d),this._rowMap.insert(b,d)}},g.prototype._dualOptimize=function(){for(var a=this._rowMap,b=this._infeasibleRows;0!==b.length;){var c=b.pop(),d=a.find(c);if(void 0!==d&&d.second.constant()<0){var e=this._getDualEnteringSymbol(d.second);if(0===e.type())throw new Error("dual optimize failed");var f=d.second;a.erase(c),f.solveForEx(c,e),this._substitute(e,f),a.insert(e,f)}}},g.prototype._getEnteringSymbol=function(a){for(var b=a.cells(),c=0,d=b.size();d>c;++c){var e=b.itemAt(c),f=e.first;if(e.second<0&&4!==f.type())return f}return j},g.prototype._getDualEnteringSymbol=function(a){for(var b=Number.MAX_VALUE,c=j,d=a.cells(),e=0,f=d.size();f>e;++e){var g=d.itemAt(e),h=g.first,i=g.second;if(i>0&&4!==h.type()){var k=this._objective.coefficientFor(h),l=k/i;b>l&&(b=l,c=h)}}return c},g.prototype._getLeavingSymbol=function(a){for(var b=Number.MAX_VALUE,c=j,d=this._rowMap,e=0,f=d.size();f>e;++e){var g=d.itemAt(e),h=g.first;if(1!==h.type()){var i=g.second,k=i.coefficientFor(a);if(0>k){var l=-i.constant()/k;b>l&&(b=l,c=h)}}}return c},g.prototype._getMarkerLeavingSymbol=function(a){for(var b=Number.MAX_VALUE,c=b,d=b,e=j,f=e,g=e,h=e,i=this._rowMap,k=0,l=i.size();l>k;++k){var m=i.itemAt(k),n=m.second,o=n.coefficientFor(a);if(0!==o){var p=m.first;if(1===p.type())h=p;else if(0>o){var q=-n.constant()/o;c>q&&(c=q,f=p)}else{var q=n.constant()/o;d>q&&(d=q,g=p)}}}return f!==e?f:g!==e?g:h},g.prototype._removeConstraintEffects=function(a,b){3===b.marker.type()&&this._removeMarkerEffects(b.marker,a.strength()),3===b.other.type()&&this._removeMarkerEffects(b.other,a.strength())},g.prototype._removeMarkerEffects=function(a,b){var c=this._rowMap.find(a);void 0!==c?this._objective.insertRow(c.second,-b):this._objective.insertSymbol(a,-b)},g.prototype._anyPivotableSymbol=function(a){for(var b=a.cells(),c=0,d=b.size();d>c;++c){var e=b.itemAt(c),f=e.first.type();if(2===f||3===f)return e.first}return j},g.prototype._makeSymbol=function(a){return new i(a,this._idTick++)},g}();a.Solver=g;var h;!function(a){a[a.Invalid=0]="Invalid",a[a.External=1]="External",a[a.Slack=2]="Slack",a[a.Error=3]="Error",a[a.Dummy=4]="Dummy"}(h||(h={}));var i=function(){function a(a,b){this._id=b,this._type=a}return a.Compare=function(a,b){return a.id()-b.id()},a.prototype.id=function(){return this._id},a.prototype.type=function(){return this._type},a}(),j=new i(0,-1),k=function(){function c(b){void 0===b&&(b=0),this._cellMap=a.createMap(i.Compare),this._constant=b}return c.prototype.cells=function(){return this._cellMap},c.prototype.constant=function(){return this._constant},c.prototype.isConstant=function(){return this._cellMap.empty()},c.prototype.allDummies=function(){for(var a=this._cellMap,b=0,c=a.size();c>b;++b){var d=a.itemAt(b);if(4!==d.first.type())return!1}return!0},c.prototype.copy=function(){var a=new c(this._constant);return a._cellMap=this._cellMap.copy(),a},c.prototype.add=function(a){return this._constant+=a},c.prototype.insertSymbol=function(a,c){void 0===c&&(c=1);var d=this._cellMap.setDefault(a,function(){return 0});b(d.second+=c)&&this._cellMap.erase(a)},c.prototype.insertRow=function(a,b){void 0===b&&(b=1),this._constant+=a._constant*b;for(var c=a._cellMap,d=0,e=c.size();e>d;++d){var f=c.itemAt(d);this.insertSymbol(f.first,f.second*b)}},c.prototype.removeSymbol=function(a){this._cellMap.erase(a)},c.prototype.reverseSign=function(){this._constant=-this._constant;for(var a=this._cellMap,b=0,c=a.size();c>b;++b){var d=a.itemAt(b);d.second=-d.second}},c.prototype.solveFor=function(a){var b=this._cellMap,c=b.erase(a),d=-1/c.second;this._constant*=d;for(var e=0,f=b.size();f>e;++e)b.itemAt(e).second*=d},c.prototype.solveForEx=function(a,b){this.insertSymbol(a,-1),this.solveFor(b)},c.prototype.coefficientFor=function(a){var b=this._cellMap.find(a);return void 0!==b?b.second:0},c.prototype.substitute=function(a,b){var c=this._cellMap.erase(a);void 0!==c&&this.insertRow(b,c.second)},c}()}(c||(c={})),c})},{}]},{},[1])(1)});